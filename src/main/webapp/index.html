<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Janus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="static/css/font-awesome.min.css" rel="stylesheet">

    <!-- janus -->
    <link href="static/css/janus.css" rel="stylesheet" media="screen">

    <!-- book display template -->
    <script id="book-template" type="text/x-handlebars-template">
      <div class="row">
        <div class="span6 entry">
          <!-- permalink -->
		  <div class="pull-right permalink"><a href="#/{{type}}/get/{{id}}"><i class="icon-link"></i></a></div>

		  <h4><em>{{title}}</em></h4>
		  {{#if series}}
            <h6>Book {{seriesIndex}} in <em><a href="#/series/get/{{series.id}}">{{series.name}}</a></em></h6>
          {{/if}}

          <div class="media">
            <a class="pull-left" href="#">
              <img src="static/img/thumbnail.jpg" data-src="s/book/{{id}}/cover?w=67&h=90" height="90" width="67" class="thumbnail lazy entryThumb"/>
            </a>
            
            <div class="media-body">
              {{#if authors}}
                <p><i class="icon-group"></i>&nbsp;
                {{#each authors}}
                  <a class="btn btn-mini" href="#/author/get/{{id}}" type="button">{{name}}</a>
                {{/each}}</p>
              {{/if}}
              
              {{#if tags}}
                <p><i class="icon-tags"></i>&nbsp;
                {{#each tags}}
                  <a class="btn btn-mini" href="#/tag/get/{{id}}" type="button">{{name}}</a>
                {{/each}}</p>
                </p>
              {{/if}}

			  <!-- download(s) -->
          	  {{#if fileInfo}}
            	<!-- starts local download -->
            	<p><i class="icon-download-alt"></i>&nbsp;
            	{{#each fileInfo}}
				  <a class="btn btn-mini" target="_blank" href="s/book/{{../id}}/file/{{type}}" type="button">{{type}} ({{descriptiveSize}})</a>		
			    {{/each}}</p>
	          {{/if}}

			  <!-- other functions -->
			  <p><i class="icon-cogs"></i>&nbsp;
				<button class="btn btn-mini" onclick="toggleQR('{{type}}', '{{id}}', '{{inJavascriptEscape title}}')"><i class="icon-qrcode"></i></button>
				<button class="btn btn-mini" onclick="toggleBookEmail('{{id}}', '{{inJavascriptEscape title}}')"><i class="icon-envelope"></i></button>
			  </p>
            </div> <!-- /end of media body -->
          </div> <!-- /end of media -->
        </div> <!-- /span -->
      </div> <!-- /row -->      
    </script>
    
    <!-- typed template specific to author -->
    <script id="generic-template" type="text/x-handlebars-template">
     <div class="row">
        <div class="span6 entry">
          <!-- permalink -->
		  <div class="pull-right permalink"><a href="#/{{type}}/get/{{id}}"><i class="icon-link"></i></a></div>

          <h4><em>{{name}}</em></h4>
          <div class="media">
            <a class="pull-left" href="#">
              <img src="static/img/thumbnail.jpg" data-src="s/{{type}}/{{id}}/cover?w=67&h=90" height="90" width="67" class="thumbnail lazy entryThumb"/>
            </a>
            
            <div class="media-body">
              {{#if bookCount}}
                <h6>Author of <a href="#/{{type}}/get/{{id}}/books">{{bookCount}} books</a>{{#if seriesCount}} and <a href="#/{{type}}/get/{{id}}/series">{{seriesCount}} series</a>{{/if}}.</h6>
			  {{else}}
			  	<p><a href="#/{{type}}/get/{{id}}/books">related books <i class="icon-circle-arrow-right"></i></a></p>
              	<p><a href="#/{{type}}/get/{{id}}/series">related series <i class="icon-circle-arrow-right"></i></a></p>				
              {{/if}}
              
			  <!-- other items related to this author -->
              <p><a href="#/{{type}}/get/{{id}}/authors">related authors <i class="icon-circle-arrow-right"></i></a></p>
			  <p><a href="#/{{type}}/get/{{id}}/tags">related tags <i class="icon-circle-arrow-right"></i></a></p>		

            </div> <!--/end of media body -->
          </div> <!-- /end of media -->
        </div> <!-- /span -->
      </div> <!-- /row --> 
    </script>
    
    <!-- if you get a multi response this part will handle showing the table header -->   
    <script id="multi-response-header-template" type="text/x-handlebars-template">
      <div class="row">
        <div class="span12">
          <div class="row-fluid">
            <div class="6">
              <ul class="nav nav-pills">
                {{#if books}}
                <li class="book_tab">
                  <a onclick="toggleTarget('book')"><strong>Books</strong></a>
                </li>
                {{/if}}
                {{#if authors}}
                <li class="author_tab">
                  <a onclick="toggleTarget('author')"><strong>Authors</strong></a>
                </li>
                {{/if}}
                {{#if series}}
                <li class="series_tab">
                  <a onclick="toggleTarget('series')"><strong>Series</strong></a>
                </li>
                {{/if}}
                {{#if tags}}
                <li class="tag_tab">
                  <a onclick="toggleTarget('tag')"><strong>Tags</strong></a>
                </li>
                {{/if}}        
              </ul>
            </div>
          </div>
        </div>
      </div>      
    </script>
   
  </head>
  <body>
      <!-- navigation bar -->
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
       
            <!-- Be sure to leave the brand out there if you want it shown -->
            <a class="brand" href="#main">Janus</a>

            <form class="navbar-search pull-left" action="#/search/all" method="get">
              <input id="term" name="term" type="text" class="search-query" placeholder="Search">
            </form>

          </div>
        </div>
      </div>

      <!-- sample navigation options -->
      <div id="mainOptions" class="container" style="display: none;">
        <div class="row">
          <div class="span12">
            <div class="row-fluid entry">
              <div class="span3">
                <h3>Books</h1>
                <h6><a href="#/book/list?sort=latest">Sorted by newest</a></h6>
                <h6><a href="#/book/list?sort=name">Sorted by name</a></h6>
              </div>
              <div class="span3">
                <h3>Authors</h3>
                <h6><a href="#/author/list?sort=latest">Sorted by newest book</a></h6>
                <h6><a href="#/author/list?sort=books">Sorted by most books</a></h6>
                <h6><a href="#/author/list?sort=series">Sorted by most series</a></h6>
                <h6><a href="#/author/list?sort=name">Sorted by name</a></h6>
              </div>
              <div class="span3">
                <h3>Series</h3>
                <h6><a href="#/series/list?sort=latest">Sorted by newest book</a></h6>
                <h6><a href="#/series/list?sort=books">Sorted by most books</a></h6>
                <h6><a href="#/series/list?sort=name">Sorted by name</a></h6>
              </div>
              <div class="span3">
                <h3>Tags</h3>
                <h6><a href="#/tag/list?sort=latest">Sorted by newest book</a></h6>
                <h6><a href="#/tag/list?sort=books">Sorted by most books</a></h6>
                <h6><a href="#/tag/list?sort=name">Sorted by name</a></h6>
              </div>            
            </div>
          </div>
        </div>
      </div>

      <div id="multi-header-target" class="container">
        <!-- this is where the search tab thing goes -->          
      </div>
      
      <div id="target">
        <!-- target div for new render items -->
      </div>

      <!-- div that is shown when no data is found -->
      <div id="noMoreEntries" class="container" style="display: none">
        <div class="row">
          <div class="span6">
            <div class="row-fluid noMoreEntries">
              <div class="span12">
                <h4>no more entries found</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div id="loadMoreLinkTarget" class="container">
        <!-- target div for href to load more -->
      </div>
      
      <!-- QR modal to save time on jquery construction -->
	  <div id="qr-modal" class="modal hide fade in" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				<i class="icon-remove"></i>
			</button>
			<h3 id="qr-modal-label"></h3>
		</div>
		<div id="qr-modal-body" class="modal-body widthOverride center">
			<!-- empty spot for QR code image -->
		</div>
		<div class="modal-footer">
			<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">close</button>
		</div>
 	  </div>
 	  
 	  <!-- EMAIL modal to save time on jquery construction -->
 	  <div id="email-modal" class="modal hide fade in" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				<i class="icon-remove"></i>
			</button>
			<h3 id="email-modal-label"></h3>
		</div>
		<div id="email-modal-body" class="modal-body widthOverride">
			<div class="row-fluid">
				<div class="span12">
					<form>
						<fieldset>
							<label>Email</label>
							<div class="input-prepend input-append normalWrapOverride">
							  <input class="span2" type="text" placeholder="email">
							  <span class="add-on">@</span>
							  <input class="span2" type="text" placeholder="host">
							  <span class="add-on">.</span>
							  <input class="span2" type="text" placeholder="com">
							</div>
							<label>Book File Type</label>
							<select>
								<option>AMAZON</option>
								<option>EPUB</option>
								<option>MOBI</option>
							</select>
						</fieldset>
					</form>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn btn-success pull-left">send email</button>&nbsp;
			<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">close</button>
		</div>
 	  </div>

  	  <!-- supporting scripts -->
      <script src="static/js/jquery.js"></script>
      <script src="static/js/bootstrap.min.js"></script>
      <script src="static/js/handlebars.js"></script>
      <script src="static/js/sammy.js"></script>
      <script src="static/js/jail.min.js"></script>
      
      <!-- janus logic -->
      <script src="static/janus/janus-config.js"></script>
      <script src="static/janus/janus-utilities.js"></script>
      <script src="static/janus/janus-template.js"></script>
      <script src="static/janus/janus-request.js"></script>
      <script src="static/janus/janus-render.js"></script>
      <script src="static/janus/janus-sammy.js"></script>

      <!-- handlebars template stuff -->
      <script>
        $(document).ready(function() {
          // initialize sammy application
          initSammy();          
        });
    </script>
  </body>
</html>